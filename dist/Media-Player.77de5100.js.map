{"version":3,"sources":["MediaPlayer.ts","plugins/AutoPlay.ts","plugins/AutoPause.ts","index.ts"],"names":[],"mappings":";;;;;;AAAA,AEEA,ADAA,IDFA,AEEA,ADAA,QAAA,CCAA,EFFA;AAAA,AEEA,ADAA;ADFA,AEEA,ADAA,YDFA,AEEA,ADAA;ADEI,AEEF,ADHA,WDCE,AEEF,ADHA,QAAA,CCGA,EFFE,ACDF,CDCc,AEEd,ADHgB,MDCd,EAAkB;AACd,AEEJ,SFFS,AEEJ,KFFD,GAAa,CEEjB,GAAiB,EFFM,CAAC,CEExB,CFFI;AACA,AEEJ,ADJF,EAAA,ODEW,AEEJ,CDJP,CAAA,KDEM,GAAe,CCFrB,CAAA,GAAA,CDE2B,CAAC,CEE1B,ADJF,GCI4B,GFFP,EEEY,EFFM,ACFnC,EDEE,ICFN,EAAuB,QCIK,CAAwB,IAAxB,CAA6B,IAA7B,CAA1B;AFDI,AGPR,ADSI,ADJA,IELJ,IFKQ,CDEK,AEEJ,ADJA,MAAM,CAAC,CELhB,GHOQ,AGPR,CFKS,CAAa,KAAlB,EAAyB,ECIzB,GAA8B,CCTlC,CAAA,GDSuC,ICTvC,CAAA,eAAA,CAAA,CAAA,ADSkC,CAA4B,IAA5B,CAAiC,IAAjC,CAA9B;AFDC,AEEF,ADJG,MAAA,MAAM,CAAC,KAAP,CAAa,KAAb,GAAqB,IAArB;AELN,AFMK,IENL,UAAA,GAAA,eAAA,CAAA,OAAA,CAAA,oBAAA,CAAA,CAAA;AHQY,AEGV,EFHU,AEGV,SAAA,CAAA,CFHU,CAAA,OEGV,CAAA,CFHU,CAAA,CEGV,GAAA,OFHU,GAAR,AEGE,MAAJ,EAAU,IFHR;AAAA,AGPJ,ADWI,ADLA,IENJ,AFMI,IDCA,CEIK,CDLC,CAAC,EDCP,EGPJ,ADWI,ADLA,CDCA,EGPJ,ADWkB,EFJd,IEIA,SCXJ,CAAA,OAAA,CAAA,qBAAA,CAAA,CAAA;ADaI,ADND,GALD,KCWQ,QAAQ,GAAG,IAAI,oBAAJ,CAAyB,KAAK,kBAA9B,EAAkD;AFL/D,AGNR,ADYM,ICZA,EDYA,GFNO,AGNF,GAAG,GDYC,CFNP,CAAa,AEMJ,GCZK,CAAC,CDYD,EFNd,CAAqB,SGNf,CHMe,AGNQ,OHMR,AGNf,CAAd,CHMoC;AACxB,AGNZ,ADUuE,ADLvE,IELM,CDUe,CFJT,AEIR,GDLJ,CELY,GHMO,AGNJ,CHMK,GAAR,AGNO,AFKnB,CDCwB,KAAZ,OGNO,CAAA,OAAJ,CAAgB;AHOtB,AGNP,ADaE,ADjBJ,CAAA,CEIE,CFJF,CEII,ADaA,CFTI,CGJF,KADyB,CDcnB,CAAC,OAAT,CAAiB,KAAK,MAAL,CAAY,KAA7B;AFNC,AGNH,ADcE,ECdF,CHEU,CATZ,AEqBI,CFPA,IGPK,EAAE,CAAC,ADcA,CAAC,GCdG,UAAA,CAAA,EDcZ,CAA0B,ICdlB,EAAD,EAAiB,IAAI,MDc5B,EAA8C,GCdlB,CAAA,CDcuB,MCd3B,EAAjB,cDcP;AChB2B,ADiB5B,ADVH,CEPe,CAAf,CDOE,IDAF,CAAA,OAAA,GAAe,QAAf;AEFA,IAAM,UAAU,GAAgB,QAAQ,CAAC,aAAT,CAAuB,aAAvB,CAAhC;AHKI,AESM,EFTN,AESM,SAAA,CAAA,CFTN,CAAA,OESM,CAAA,CFTN,CAAA,IAAA,GAAA,SESM,GFTN,AESF,UAA2B,OAA3B,EAA+D;AFRzD,AGLR,ADcI,QAAM,CFTG,CGLH,CAAC,EDcI,CFTP,CAAW,CESD,ECdlB,CHKQ,EGLa,EDcI,CAAC,CAAD,CAArB,OCdiB;AHMhB,AGNsB,ADgBvB,GFZA,CAfJ,CAkBI,GESM,CChBiB,MAAM,CAAC,CDgBf,GAAG,KAAK,CChBA,ADgBC,EChBD,eDgBL,IAA2B,KAAK,SAAlD;AChB0C,CAA9C;ADkBI,QAAI,SAAJ,EAAe;AFVf,AGNJ,ADiBM,EFXF,EGNE,ODiBK,EFXP,CAAA,AGNY,GAAgB,ADiB1B,CAAY,IAAZ,CFXF,CAAA,CGNoC,CAAC,GHMrC,GAAA,OGN4B,CAAuB,IHMnD,SGN4B,CAAhC;AHOQ,AEWH,KAFD,IFTS,EEWF,GFXH,CAAW,KAAX;AACH,AGPL,ADkBM,GFbF,OGLM,CAAC,ADkBA,MAAL,CClBN,ADkBkB,GClBG,EDkBf,UClBe;AACnB,ADkBG,MClBC,MAAM,CAAC,KAAP,CAAa,KAAjB,EAAwB;AHQtB,AGPA,ADkBD,EFXC,CECM,CCRN,MAAM,CAAC,EHOP,CAAA,GGPA,MHOA,CAAA,UAAA,GAAA,YAAA;AACI,AGPL,GAFD,KHSS,CGPF,IHOO,KAAL,CAAW,MAAd,EAAqB;AACjB,AGPR,ADkBM,EAAA,EClBN,MAAM,CHOO,AGPN,ADkBD,CAAA,GFXE,AGPR,MDkBM,CAAA,sBAAA,GAAR,YAAA;AFVO,AGPN,ADkBC,KFbI,GEaE,GFXG,MEWM,GAAG,QAAQ,CAAC,eAAT,KAA6B,SAA/C;AFVQ,AGPX,CAND,UHaiB,KAAL;AACH,AEUL,QAAI,SAAJ,EAAe;AFTd,AGPL,ADiBM,GFhBF,CGDA,ODiBO,MAAL,CAAY,IAAZ,CCjBiB,SAAvB,EAAkC;AAChC,ADiBG,ECjBH,GDeE,MCfO,ADiBA,CCjBC,aAAV,CAAwB,QAAxB,CAAiC,sCAAjC,EAA2C,KAA3C,CAAiD,UAAA,KAAA,EAAK;AHQpD,AGPA,ADiBE,EFVF,EGPA,OAAO,ADiBA,CCjBC,CHOR,CAAA,CGPA,CAAY,CDiBV,CAAY,GCjBG,CAAC,CHOlB,AEUE,CFVF,IAAA,CGPA,EHOA,YAAA;AACI,AGPL,ADiBE,GCnBH,MHSW,KAAL,CAAW,KAAX,GAAmB,IAAnB;AACH,AGPJ,ADiBE,GFZC,AEKM;;AFFN,AEUJ,EFVI,OEUJ,IFVI,CAAA,IEUJ,KFVI,CAAA,MAAA,GAAA,YAAA;AACI,AEjCR,CAAA,EAAA,MFiCa,KAAL,CAAW,KAAX,GAAmB,KAAnB;AACH,GAFD;AEYJ,OAAA,CAAA,OAAA,GAAe,SAAf;AFTA,SAAA,WAAA;AArCA,CAAA,EAAA;;AAuCA,OAAA,CAAA,OAAA,GAAe,WAAf","file":"Media-Player.77de5100.js","sourceRoot":"..","sourcesContent":["class MediaPlayer {\n    media:HTMLMediaElement;\n    plugins: Array<any>;\n\n    constructor(config){\n        this.media = config.el;\n        this.plugins = config.plugins || []\n        this.initPlugins();\n    }\n    private initPlugins() {\n        this.plugins.forEach(plugins => {\n            plugins.run(this);\n        });\n    }\n    //Play\n    play(){\n        this.media.play();\n    }\n    //Pause\n    pause(){\n        this.media.pause();\n    }\n \n    togglePlay(){\n        if(this.media.paused){\n            this.play();\n        }else{\n            this.pause();\n        }\n    }\n\n    mute() {\n        this.media.muted = true;\n    }\n    unmute() {\n        this.media.muted = false;\n    }\n}\n\nexport default MediaPlayer;","import MediaPlayer from '../MediaPlayer';\n\nclass AutoPlay {\n  constructor() {}\n  run(player: MediaPlayer) {\n    if (!player.media.muted) {\n      player.media.muted = true;\n    }\n    player.play();\n  }\n}\n\nexport default AutoPlay;\n\n","import MediaPlayer from '../MediaPlayer';\n\nclass AutoPause {\n  private threshold: number;\n  player: MediaPlayer;\n\n  constructor() {\n    this.threshold = 0.25;\n    this.handleIntersection = this.handleIntersection.bind(this);\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n  }\n\n  run(player) {\n    this.player = player;\n\n    const observer = new IntersectionObserver(this.handleIntersection, {\n      threshold: this.threshold,\n    });\n\n    observer.observe(this.player.media);\n\n    document.addEventListener('visibilitychange', this.handleVisibilityChange);\n  }\n\n  private handleIntersection(entries: IntersectionObserverEntry[]) {\n    const entry = entries[0];\n\n    const isVisible = entry.intersectionRatio >= this.threshold;\n\n    if (isVisible) {\n      this.player.play();\n    } else {\n      this.player.pause();\n    }\n  }\n\n  private handleVisibilityChange() {\n    const isVisible = document.visibilityState === 'visible';\n    if (isVisible) {\n      this.player.play();\n    } else {\n      this.player.pause();\n    }\n  }\n}\n\nexport default AutoPause;","import MediaPlayer from './MediaPlayer';\nimport AutoPlay from './plugins/AutoPlay';\nimport AutoPause from './plugins/AutoPause';\n\nconst video = document.querySelector('video');\nconst player = new MediaPlayer({\n  el: video,\n  plugins: [new AutoPlay(), new AutoPause()],\n});\n\nconst playButton: HTMLElement = document.querySelector('#playButton');\nplayButton.onclick = () => player.togglePlay();\n\nconst muteButton: HTMLElement = document.querySelector('#muteButton');\nmuteButton.onclick = () => {\n  if (player.media.muted) {\n    player.unmute();\n  } else {\n    player.mute();\n  }\n};\n\nif ('serviceWorker' in navigator) {\n  navigator.serviceWorker.register('/sw.js').catch(error => {\n    console.log(error.message);\n  });\n}\n"]}